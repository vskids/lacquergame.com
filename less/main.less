@import "/fonts/cabin.less";
@import "/fonts/cabin-condensed.less";
@import "/fonts/cabin-sketch.less";
@import "/fonts/calligraffitti.less";
@import "/fonts/codystar.less";
@import "/fonts/dancing-script.less";
@import "/fonts/fredericka-the-great.less";
@import "/fonts/indie-flower.less";
@import "/fonts/megrim.less";
@import "/fonts/oswald.less";
@import "/fonts/raleway-dots.less";



// Text Styling

@font-size-base: 24px;

.monologue {
	@font-size: (@font-size-base * 1.5);
	@em-strong-font-size: (@font-size-base * 2);
	@h1-font-size: (@font-size-base * 3);
	@header-font-size: (@font-size-base * 2.5);
	@small-header-font-size: (@font-size-base * 2);
	
	.font_cabin-sketch-regular(@font-size);
	line-height: (@font-size * 1.8);
	
	b {
		.font_cabin-sketch-bold(@font-size);
	}
	em {
		.font_cabin-sketch-regular(@em-strong-font-size);
	}
	em b, b em {
		.font_cabin-sketch-bold(@em-strong-font-size);
	}
	i, i * {
		font-style: oblique !important;
	}
	
	.header() {
		small {
			color: inherit; // revert Bootstrap re-coloring
			.font_cabin-sketch-regular(@small-header-font-size);
		}
	}
	& h1, h1&, h1 & {
		.header();
		.font_cabin-sketch-regular(@h1-font-size);
	}
	& header, header&, header &,
	& h2, h2&, h2 & {
		.header();
		.font_cabin-sketch-regular(@header-font-size);
	}
}
.statement {
	@font-size: (@font-size-base * 2.3);
	.font_codystar(@font-size);
	
	color: @orange-darker;
	text-shadow: 0 0 2px rgba(255, 255, 255, 0.5);
}

.verse {
	display: block;
	clear: both;
}

.text-pad-left-0_25 { padding-left: 0.25em; }
.text-pad-left-0_333 { padding-left: 0.333em; }
.text-pad-left-0_5 { padding-left: 0.5em; }
.text-pad-left-0_666 { padding-left: 0.666em; }
.text-pad-left-0_75 { padding-left: 0.75em; }
.text-pad-left-1 { padding-left: 1em; }
.text-pad-left-1_25 { padding-left: 1.25em; }
.text-pad-left-1_333 { padding-left: 1.333em; }
.text-pad-left-1_5 { padding-left: 1.5em; }
.text-pad-left-1_666 { padding-left: 1.666em; }
.text-pad-left-1_75 { padding-left: 1.75em; }
.text-pad-left-2 { padding-left: 2em; }
.text-pad-left-2_5 { padding-left: 2.5em; }

.text-pad-right-0_25 { padding-right: 0.25em; }
.text-pad-right-0_333 { padding-right: 0.333em; }
.text-pad-right-0_5 { padding-right: 0.5em; }
.text-pad-right-0_666 { padding-right: 0.666em; }
.text-pad-right-0_75 { padding-right: 0.75em; }
.text-pad-right-1 { padding-right: 1em; }
.text-pad-right-1_333 { padding-right: 1.333em; }
.text-pad-right-1_25 { padding-right: 1.25em; }
.text-pad-right-1_5 { padding-right: 1.5em; }
.text-pad-right-1_666 { padding-right: 1.666em; }
.text-pad-right-1_75 { padding-right: 1.75em; }
.text-pad-right-2 { padding-right: 2em; }
.text-pad-right-2_5 { padding-right: 2.5em; }




// Layout

@body-min-width: 970px;

html, body {
	height: 100%;
	/// fix for right-edge white area when the viewport is narrower than bootstrap .container width set in non-responsive.css
	min-width: @body-min-width !important;
}

.screen-height-rel {
	.vh() {}
	& .vh-50, &.vh-50 { .vh(); height: 50vh; }
	& .vh-75, &.vh-75 { .vh(); height: 75vh; }
	& .vh-100, &.vh-100 { .vh(); height: 100vh; }
	& .vh-150, &.vh-150 { .vh(); height: 150vh; }
	& .vh-200, &.vh-200 { .vh(); height: 200vh; }
	& .vh-300, &.vh-300 { .vh(); height: 300vh; }
	& .vh-400, &.vh-400 { .vh(); height: 400vh; }
}

@base-height: 1000px;
@base-height-rel-height-base: (@base-height / 100);
.base-height-rel {
	.vh() {}
	& .vh-50, &.vh-50 { .vh(); height: (50 * @base-height-rel-height-base); }
	& .vh-75, &.vh-75 { .vh(); height: (75 * @base-height-rel-height-base); }
	& .vh-100, &.vh-100 { .vh(); height: (100 * @base-height-rel-height-base); }
	& .vh-150, &.vh-150 { .vh(); height: (150 * @base-height-rel-height-base); }
	& .vh-200, &.vh-200 { .vh(); height: (200 * @base-height-rel-height-base); }
	& .vh-300, &.vh-300 { .vh(); height: (300 * @base-height-rel-height-base); }
	& .vh-400, &.vh-400 { .vh(); height: (400 * @base-height-rel-height-base); }
}

@line-height-rel-height-base: (@line-height-computed / 4);
.line-height-rel {
	.vh() {}
	& .vh-50, &.vh-50 { .vh(); height: (50 * @line-height-rel-height-base); }
	& .vh-75, &.vh-75 { .vh(); height: (75 * @line-height-rel-height-base); }
	& .vh-100, &.vh-100 { .vh(); height: (100 * @line-height-rel-height-base); }
	& .vh-150, &.vh-150 { .vh(); height: (150 * @line-height-rel-height-base); }
	& .vh-200, &.vh-200 { .vh(); height: (200 * @line-height-rel-height-base); }
	& .vh-300, &.vh-300 { .vh(); height: (300 * @line-height-rel-height-base); }
	& .vh-400, &.vh-400 { .vh(); height: (400 * @line-height-rel-height-base); }
}

.vert-block(@verticalAlign) {
	display: table;
	width: 100%; height: 100%;
	// @maybe: min-height: 100%; // I don't remember where I found this CSS, but it originally had a min-height in it.  It might be necessary for some older or *cough*IE*cough* browsers.
	
	> .inner {
		display: table-cell !important;
		vertical-align: @verticalAlign;
	}
}

.vert-top-block { .vert-block(top); }
.vert-middle-block { .vert-block(middle); }
.vert-bottom-block { .vert-block(bottom); }



// Phases

.phase {
	position: relative;
	
	> .back {
		z-index: -1;
		
		&, & .back {
			position: absolute;
			width: 100%; height: 100%;
			
			&.fixed {
				position: fixed;
			}
		}
	}
	
	> .overlay {
		position: fixed;
	}
}
#sky-phase {
	.phase;
	z-index: 100;
	
	color: #fff;
	text-shadow: 0 0 3px rgba(0, 0, 0, 0.25);
	
	> .back {
		&, & .back {
			&.clip {
				position: absolute !important;
				clip: rect(auto, auto, auto, auto);
			}
			&.fill {
				background-color: @sky-eve-mid; // fallback
				.linear-gradient(
					@dir: to bottom;
					@stops: @sky-eve-top-as-rgb, @sky-eve-mid-as-rgb, @sky-eve-bottom-as-rgb
				);
				
				.-skrollr-dry-animation(sky-fill-gradient; {
					@backgroundProp: ~"background[linear]";
					_sky_phase_open {
						@{backgroundProp}: linear-gradient(
							to bottom,
							@sky-eve-top-as-rgb, @sky-eve-mid-as-rgb, @sky-eve-bottom-as-rgb
						) no-repeat;
					}
					_sky_phase_close {
						@{backgroundProp}: linear-gradient(
							to bottom,
							@sky-night-top-as-rgb, @sky-night-mid-as-rgb, @sky-night-bottom-as-rgb
						) no-repeat;
					}
				});
			}
		}
	}
	
	> .overlay {
		&#scrolldown, & #scrolldown {
			width: 50px; height: auto;
			bottom: 10px; right: 10px;
			
			.-skrollr-dry-animation(skrolldown-op; {
				@opacityProp: ~"opacity[linear]";
				0 { @{opacityProp}: 1.0; }
				30 { @{opacityProp}: 0.0; }
			});
		}
	}
}
#ambitions-phase {
	.phase;
	z-index: 200;
	
	color: #fff;
	text-shadow: 0 0 3px rgba(0, 0, 0, 0.25);
	
	> .back {
		&, & .back {
			&.fill {
				background-color: @purple-darker; // fallback
				.linear-gradient(
					@dir: to bottom;
					@stops: @purple-dark, @teal-darker
				);
			}
		}
	}
}
#title-phase {
	.phase;
	z-index: 300;
	
	&, .container, .container-fluid {
		min-height: 768px;
	}
	
	> .back {
		&, & .back {
			&.fill {
				background-color: @cobalt-light; // fallback
				.linear-gradient(
					@dir: to bottom;
					@stops: white, @cobalt-light
				);
			}
		}
	}
	
	.container, .container-fluid {
		position: relative; // everything inside is absolutely-positioned
		
		overflow: hidden;
	}
	
	> .overlay {
		&#versuskidspresent, & #versuskidspresent {
			&, img {
				width: 147px; height: auto;
			}
			top: 10px; left: 10px;
			
			.-skrollr-dry-animation(versuskidspresent-op; {
				@opacityProp: ~"opacity[linear]";
				_title_phase_open_before { @{opacityProp}: 0.0; }
				_title_phase_open { @{opacityProp}: 1.0; }
			});
		}
	}
}



// Sky-Phase Starfields

@starfieldScrollOffsetBase: (@line-height-rel-height-base * -300);

.generateStarfieldRules(@uniqueName; @initialOpacity; @endOpacity; @initialScrollOffsetFactor; @endScrollOffsetFactor; @opacityEasing; @bgEasing) {
	&:extend(.starfield all);
	
	//& when not (@initialOpacity = 1.0) {
	//	& when not (@endOpacity = 1.0) {
			.opacity(@initialOpacity);
			
			.-skrollr-dry-animation(~"@{uniqueName}-op"; {
				@opacityProp: ~"opacity[@{opacityEasing}]";
				_sky_phase_open { @{opacityProp}: @initialOpacity; }
				_sky_phase_disappear { @{opacityProp}: @endOpacity; }
			});
	//	}
	//}
	
	&.image, & .image {
		@initialScrollOffset: (@starfieldScrollOffsetBase * @initialScrollOffsetFactor);
		@endScrollOffset: (@starfieldScrollOffsetBase * @endScrollOffsetFactor);
		background-position: 0 @initialScrollOffset;
		
		.-skrollr-dry-animation(~"@{uniqueName}-pos"; {
			@backgroundPositionProp: ~"background-position[@{bgEasing}]";
			_sky_phase_open_before { @{backgroundPositionProp}: 0 @initialScrollOffset; }
			_sky_phase_disappear { @{backgroundPositionProp}: 0 @endScrollOffset; }
		});
	}
}

.starfield {
	&.image, & .image {
		background-repeat: repeat;
	}
}

#starfield1 {
	@scrollOffsetFactor: 0.15;
	.generateStarfieldRules(
		starfield1;
		1.0; 1.0;
		(@scrollOffsetFactor * -0.2); @scrollOffsetFactor;
		linear; linear
	);
	&.image, & .image {
		background-image: url('../graphics/starfield1.s512.png');
	}
}
#starfield2 {
	@scrollOffsetFactor: 0.3;
	.generateStarfieldRules(
		starfield2;
		0.0; 1.0;
		(@scrollOffsetFactor * -0.2); @scrollOffsetFactor;
		outQuart1stQuarterTo3rdQuarter; linear
	);
	&.image, & .image {
		background-image: url('../graphics/starfield2.s1024.png');
	}
}
#starfield3 {
	@scrollOffsetFactor: 0.5;
	.generateStarfieldRules(
		starfield3;
		0.0; 1.0;
		(@scrollOffsetFactor * -0.2); @scrollOffsetFactor;
		outExpoMidToEnd; linear
	);
	&.image, & .image {
		background-image: url('../graphics/starfield3.s720.png');
	}
}
#starfield4 {
	@scrollOffsetFactor: 0.2;
	.generateStarfieldRules(
		starfield4;
		0.0; 1.0;
		(@scrollOffsetFactor * -0.2); @scrollOffsetFactor;
		outQuadStartToMid; linear
	);
	&.image, & .image {
		background-image: url('../graphics/starfield4.s700.png');
	}
}



// Title-Phase Images

#lakestrip {
	&.image, & .image {
		@media (max-width: @screen-xs-max) {
			background-image: url('../graphics/lakestrip.767x250.png');
		}
		@media (min-width: @screen-sm) {
			background-image: url('../graphics/lakestrip.991x323.png');
		}
		@media (min-width: @screen-md) {
			background-image: url('../graphics/lakestrip.1199x390.png');
		}
		@media (min-width: @screen-lg) {
			background-image: url('../graphics/lakestrip.1920x625.png');
		}
		
		background-repeat: no-repeat;
		background-size: 100% auto;
		
		@initialScrollOffset: 50%;
		@endScrollOffset: 15%;
		background-position: 0 @endScrollOffset; // initially at end just-in-case we don't have JS
		
		.-skrollr-dry-animation(~"lakestrip-pos"; {
			@backgroundPositionProp: ~"background-position[outQuad]";
			_title_phase_appear { @{backgroundPositionProp}: 0 @initialScrollOffset; }
			_title_phase_close { @{backgroundPositionProp}: 0 @endScrollOffset; }
		});
	}
}

#sparkles {
	&.image, & .image {
		background-image: url('../graphics/starfieldwhite.s512.png');
		background-repeat: repeat;
		
		@initialScrollOffset: 0%;
		@endScrollOffset: -200%;
		background-position: 0 @initialScrollOffset;
		
		.-skrollr-dry-animation(~"sparkles-pos"; {
			@backgroundPositionProp: ~"background-position[linear]";
			_title_phase_appear { @{backgroundPositionProp}: 0 @initialScrollOffset; }
			_title_phase_close { @{backgroundPositionProp}: 0 @endScrollOffset; }
		});
	}
}

.title-piece {
	position: absolute;
	margin: 0 auto; left: 0; right: 0;
	
	> .inner {
		position: relative;
		width: 100%; height: 100%;
		
		> * {
			position: absolute;
		}
	}
}

#title-logo {
	&:extend(.title-piece all);
	
	top: 10%;
	
	@logoBaseWidth: 605px;
	@logoBaseHeight: 318px;
	
	@logoScale: 1.2;
	width: (@logoBaseWidth * @logoScale); height: (@logoBaseHeight * @logoScale);
	
	> .inner {
		#lacquer {
			@width: (500px / @logoBaseWidth); width: percentage(@width);
			height: auto;
			
			@left: (0px / @logoBaseWidth); left: percentage(@left);
			@top: (0px / @logoBaseHeight); top: percentage(@top);
		}
		#fromdreamstoice {
			@width: (290px / @logoBaseWidth); width: percentage(@width);
			height: auto;
			
			@left: (315px / @logoBaseWidth); left: percentage(@left);
			@top: (153px / @logoBaseHeight); top: percentage(@top);
		}
	}
}

#title-closing {
	&:extend(.title-piece all);
	
	top: 72%; bottom: 0%;
	
	> .inner {
		.statement {
			text-align: center;
			left: 0; right: 0;
		}
		#stargazer {
			@stargazerWidth: 220px; width: @stargazerWidth;
			height: auto;
			
			left: 50%;
			margin-left: (-@stargazerWidth * 0.3);
			
			bottom: -10px;
		}
	}
}

#title-bottom {
	&:extend(.title-piece all);
	
	bottom: 0%;
	
	> .inner {
		#comingsoon {
			width: 210px;
			height: auto;
			
			bottom: 10px; left: 10px;
		}
	}
}
