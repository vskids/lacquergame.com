@import "/fonts/cabin.less";
@import "/fonts/cabin-condensed.less";
@import "/fonts/cabin-sketch.less";
@import "/fonts/calligraffitti.less";
@import "/fonts/codystar.less";
@import "/fonts/dancing-script.less";
@import "/fonts/fredericka-the-great.less";
@import "/fonts/indie-flower.less";
@import "/fonts/megrim.less";
@import "/fonts/oswald.less";



/// Bootstrap default overrides

@font-size-base: 20px;



// full-screen-height adjustments, rules

html, body { height: 100%; }

@screenheights: 50%, 100%, 150%, 200%, 300%, 400%;
.generate-screenheights(@screenheights, vh-);

.monologue {
	@font-size: (@font-size-base * 2.5);
	.font_dancing-script(@font-size);
}



// phases

.phase {
	position: relative;
	
	> .back {
		z-index: -1;
		
		&, & .back {
			position: absolute;
			width: 100%; height: 100%;
			
			&.fixed {
				position: fixed;
			}
		}
	}
}
#sky-phase {
	.phase;
	z-index: 100;
	
	color: #fff;
	text-shadow: 0 0 3px rgba(0, 0, 0, 0.5);
	
	> .back {
		&, & .back {
			&.fill {
				background-color: @sky-eve-mid; // fallback
				.linear-gradient(
					@dir: to bottom;
					@stops: @sky-eve-top-as-rgb, @sky-eve-mid-as-rgb, @sky-eve-bottom-as-rgb
				);
				
				.-skrollr-dry-animation(sky-fill-gradient; {
					@backgroundProp: ~"background[linear]";
					_sky_phase_start {
						@{backgroundProp}: linear-gradient(
							to bottom,
							@sky-eve-top-as-rgb, @sky-eve-mid-as-rgb, @sky-eve-bottom-as-rgb
						) no-repeat;
					}
					_sky_phase_center {
						@{backgroundProp}: linear-gradient(
							to bottom,
							@sky-night-top-as-rgb, @sky-night-mid-as-rgb, @sky-night-bottom-as-rgb
						) no-repeat;
					}
				});
			}
		}
	}
}
#ambitions-phase {
	.phase;
	z-index: 200;
	
	color: white;
	
	> .back {
		&, & .back {
			&.fill {
				background-color: @purple-darker; // fallback
				.linear-gradient(
					@dir: to bottom;
					@stops: @purple-dark, @teal-darker
				);
			}
		}
	}
}
#title-phase {
	.phase;
	z-index: 300;
	
	color: @purple-darker;
	
	> .back {
		&, & .back {
			&.fill {
				background-color: @cobalt-light; // fallback
				.linear-gradient(
					@dir: to bottom;
					@stops: white, @cobalt-light
				);
			}
		}
	}
}



// starfields

@starfieldScrollOffsetBase: 500%;

.generateStarfieldRules(@uniqueName; @initialOpacity; @endOpacity; @initialScrollOffsetFactor; @endScrollOffsetFactor; @opacityEasing; @bgEasing) {
	&:extend(.starfield all);
	
	& when not (@initialOpacity = 1.0) and (@endOpacity = 1.0) {
		.opacity(@initialOpacity);
		
		.-skrollr-dry-animation(~"@{uniqueName}-op"; {
			@opacityProp: ~"opacity[@{opacityEasing}]";
			_sky_phase_start { @{opacityProp}: @initialOpacity; }
			_sky_phase_end { @{opacityProp}: @endOpacity; }
		});
	}
	
	&.image, & .image {
		@initialScrollOffset: (@starfieldScrollOffsetBase * @initialScrollOffsetFactor);
		@endScrollOffset: (@starfieldScrollOffsetBase * @endScrollOffsetFactor);
		background-position: left 0px top @initialScrollOffset;
		
		.-skrollr-dry-animation(~"@{uniqueName}-pos"; {
			@backgroundPositionProp: ~"background-position[@{bgEasing}]";
			_sky_phase_start_before { @{backgroundPositionProp}: left 0px top @initialScrollOffset; }
			_sky_phase_end { @{backgroundPositionProp}: left 0px top @endScrollOffset; }
		});
	}
}

.starfield {
	&.image, & .image {
		background-repeat: repeat;
	}
}

#starfield1 {
	@scrollOffsetFactor: 0.15;
	.generateStarfieldRules(
		starfield1;
		1.0; 1.0;
		(@scrollOffsetFactor * -0.2); @scrollOffsetFactor;
		linear; linear
	);
	&.image, & .image {
		background-image: url('../graphics/starfield1.s512.png');
	}
}
#starfield2 {
	@scrollOffsetFactor: 0.333;
	.generateStarfieldRules(
		starfield2;
		0.0; 1.0;
		(@scrollOffsetFactor * -0.2); @scrollOffsetFactor;
		linearMidToEnd; linear
	);
	&.image, & .image {
		background-image: url('../graphics/starfield2.s1024.png');
	}
}
#starfield3 {
	@scrollOffsetFactor: 0.5;
	.generateStarfieldRules(
		starfield3;
		0.0; 1.0;
		(@scrollOffsetFactor * -0.2); @scrollOffsetFactor;
		linearMidToEnd; linear
	);
	&.image, & .image {
		background-image: url('../graphics/starfield3.s720.png');
	}
}
#starfield4 {
	@scrollOffsetFactor: 0.25;
	.generateStarfieldRules(
		starfield4;
		0.25; 1.0;
		(@scrollOffsetFactor * -0.2); @scrollOffsetFactor;
		linearStartToMid; linear
	);
	&.image, & .image {
		background-image: url('../graphics/starfield4.s700.png');
	}
}
