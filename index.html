<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="initial-scale=1.0">
		
		<title>Basic Bootstrap Template</title>
		
		<!-- Bootstrap -->
		<link href="css/styles.css" rel="stylesheet" type="text/css" data-skrollr-stylesheet>
		
		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
	</head>
	<body>



<section id="sky-phase" class="vh-200">
	<div class="back fill"></div>
	<div id="starfield1" class="back"><div class="back image"></div></div>
	<div id="starfield2" class="back"><div class="back image"></div></div>
	<div id="starfield3" class="back"><div class="back image"></div></div>
	<div id="starfield4" class="back"><div class="back image"></div></div>
	
	<div class="container vh-100">
		<div class="monologue">Oh, there you are.  I missed you.</div>
	</div>
	<div class="container vh-50">
		<div class="monologue">
			You know what I've been thinking a lot about lately?<br>
			The stars.
		</div>
	</div>
	<div class="container vh-50">
		<div class="monologue">
			The constellations were named by the ancient Greeks…<br>
			and those stars are still there,<br>
			as bright as they always have been.
		</div>
	</div>
</section>
<section id="ambitions-phase" class="vh-150">
	<div class="back fill"></div>
	
	<div class="container vh-50">
		<div class="monologue">
			I want to leave my mark somehow, so no one ever forgets my dream:<br>
			To shine like a star, A dazzling light, Against a cold backdrop.
		</div>
	</div>
	<div class="container vh-50">
		<div class="monologue">
			my story:<br>
			Fulfilling my dreams of skating not just for myself but for everyone.
		</div>
	</div>
	<div class="container vh-50">
		<div class="monologue">
			my constellation:<br>
			My mark on this lake, my canvas, my piece of the world.
		</div>
	</div>
</section>
<section id="title-phase" class="vh-100">
	<div class="back fill"></div>
	
	<div class="container vh-100">
		<div class="">Lacquer: From Dreams To Ice</div>
		<div class="">Leave your mark this winter.</div>
	</div>
</section>



		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="bower_components/jquery/dist/jquery.min.js"></script>
		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
		<script src="bower_components/skrollr-stylesheets/dist/skrollr.stylesheets.min.js"></script>
		<script src="bower_components/skrollr/src/skrollr.js"></script>
		<!--[if lt IE 9]><script type="text/javascript" src="bower_components/skrollr-ie/dist/skrollr.ie.min.js"></script><![endif]-->
		<script>
var accelDecelSkrollrEasing = function (progress, domElement, propertyName, targetValue, currentValueGetter, newValueSetter, keyframeValues) {
	var currentValue = currentValueGetter();
	if (currentValue[2] == targetValue[2])
		return progress;
	
	if (domElement['___skrollr_accelDecel'] == undefined)
		domElement['___skrollr_accelDecel'] = {};
	
	var state = domElement.___skrollr_accelDecel[propertyName];
	if (state === null || state === undefined) {
		state = domElement.___skrollr_accelDecel[propertyName] = {
			velocity: 0.0,
			direction: 0,
			target: targetValue[2] //.slice(1)
		};
		
		setTimeout(function () {
			_step(state, currentValueGetter);
		}, 10);
	}
	else {
		state.target = targetValue[2]; //.slice(1)
	}
	
	var leftRightDelta = keyframeValues.right[2] - keyframeValues.left[2];
	var newValueLeftOffset = currentValue - keyframeValues.left[2];
	var newProgress = newValueLeftOffset / leftRightDelta;
	return newProgress;
	
	var state = domElement.___skrollr_accelDecel[propertyName];
	
	function _step(state) {
		if (state === null || state === undefined)
			return;
		
		var currentValue = currentValueGetter();
		
		var deltaValue = state.target - currentValue[2];
		if (Math.abs(deltaValue) < 1.0) {
			newValueSetter([targetValue[0], targetValue[1], state.target]);
			
			domElement.___skrollr_accelDecel[propertyName] = null;
			return;
		}
		
		var direction = (deltaValue > 0) ? 1 : -1;
		var accelAmount = (direction != state.direction) ? 0.5 : 2.0;
		var accelVelocity = (state.velocity + direction) * accelAmount;
		var decelVelocity = deltaValue * 0.5;
		var newVelocity = (Math.abs(accelVelocity) < Math.abs(decelVelocity)) ? accelVelocity : decelVelocity;
		
		var newValue = currentValue[2] + newVelocity;
		
		var currentValue_beforeSet = currentValueGetter();
		newValueSetter([targetValue[0], targetValue[1], newValue]);
		var currentValue_afterSet = currentValueGetter();
		
		console.log(
			'velocity: '+state.velocity+'->'+newVelocity+', ' +
			'delta: '+deltaValue+', ' +
			'dir: '+direction+', ' +
			'accel: '+accelVelocity+', ' +
			'decel: '+decelVelocity+', ' +
			'value: '+currentValue_beforeSet+'->'+currentValue_afterSet
		);
		
		state.velocity = newVelocity;
		
		setTimeout(function () {
			_step(state);
		}, 10);
	}
};


var s = skrollr.init({
	mobileCheck: function () { return false; },
	edgeStrategy: 'ease',
	forceHeight: false,
	smoothScrolling: false,
	easing: {
		accelDecel: accelDecelSkrollrEasing
	}
});
		</script>
		<script>
var $unscaleBackgrounds_closeEnoughDifference = 20;
function unscaleBackgrounds(jQElements, lastStateObject) {
	// according to: http://www.quirksmode.org/mobile/viewports2.html
	var layoutViewportWidth = document.documentElement.clientWidth;
	var visualViewportWidth = window.innerWidth;
	var screenWidth = screen.width;
	if (layoutViewportWidth == lastStateObject.layoutViewportWidth && visualViewportWidth == lastStateObject.visualViewportWidth) {
		return;
	} else {
		lastStateObject.layoutViewportWidth = layoutViewportWidth;
		lastStateObject.visualViewportWidth = visualViewportWidth;
	}
	
	var isCloseEnoguhToAssume1To1Scale = Math.abs(visualViewportWidth - layoutViewportWidth) < $unscaleBackgrounds_closeEnoughDifference;
	var viewportInverseZoom = isCloseEnoguhToAssume1To1Scale ? 1.0 : (visualViewportWidth / layoutViewportWidth);
	if (viewportInverseZoom == lastStateObject.viewportInverseZoom)
		return;
	else
		lastStateObject.viewportInverseZoom = viewportInverseZoom;
	
	jQElements.css({ zoom: viewportInverseZoom });
}

$(document).ready(function() {
	$lastState_unscaleSkyBackImages = {};
	var unscaleSkyBackImages = function () {
		unscaleBackgrounds($('#sky-phase > .back.image, #sky-phase > .back .image'), $lastState_unscaleSkyBackImages);
	};
	unscaleSkyBackImages();
	$(window).on('scroll resize', unscaleSkyBackImages);
});
		</script>
	</body>
</html>
